<html>
  <head>
    <meta name="apple-itunes-app" content="app-id=1553442906" />
  </head>
  <body>
    <input
      type="button"
      onclick="getMobileOperatingSystem()"
      value="CheckOSType"
    />

    <input
      type="button"
      onclick="getInstalledApps()"
      value="GetInstalledApps"
    />

    <input type="button" onclick="getCurrentBrowser()" value="getCurrentBrowser" />
    <div id="OsTypePlaceHolder"></div>
    <script>
      function getInstalledApps() {
        alert("alert is working");
        let temp = navigator.getInstalledRelatedApps();

        temp.then((x) => console.log(x));
      }

      function getCurrentBrowser() {
        const userAgent = navigator.userAgent;
        let browser = "unkown";
        // Detect browser name
        browser =
          /chrome|crios/i.test(userAgent) &&
          !/opr|opera|chromium|edg|ucbrowser|googlebot/i.test(userAgent)
            ? "Chrome"
            : browser;

        browser =
          /safari/i.test(userAgent) &&
          !/chromium|edg|ucbrowser|chrome|crios|opr|opera|fxios|firefox/i.test(
            userAgent
          )
            ? "Safari"
            : browser;
        alert(browser);
        return browser;
      }

      function getMobileOperatingSystem() {
        var userAgent = navigator.userAgent || navigator.vendor || window.opera;

        let osElement = document.getElementById("OsTypePlaceHolder");

        // Windows Phone must come first because its UA also contains "Android"
        if (/windows phone/i.test(userAgent)) {
          alert("Windows Phone");
          console.log("Windows Phone");
          osElement.innerText("Windows Phone");
          return "Windows Phone";
        }

        if (/android/i.test(userAgent)) {
          alert("Android");
          console.log("Android");
          osElement.innerText("Android");
          return "Android";
        }

        // iOS detection from: http://stackoverflow.com/a/9039885/177710
        if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
          alert("IOS");
          console.log("IOS");
          osElement.innerText("IOS");
          return "iOS";
        }

        console.log("Unknown");
        return "unknown";
      }
    </script>
  </body>
</html>
